---
import type { ImageMetadata } from "astro";

import { Icon } from "astro-icon/components";

interface Props {
  memberId: string;
  name: string;
  avatar: ImageMetadata;
  roles: Record<string, string[]>;
  contacts: string[];
}

const props = Astro.props;
---

<article>
  <h2>
    <a href={`/team/${props.memberId}`}>{props.name}</a>
  </h2>
  <img src={props.avatar.src} />
  <h3>Roles</h3>
  <ul class="projects">
    {
      Object.keys(props.roles).map((project) => (
        <li>
          {project}:
          {!!props.roles[project].length && (
            <ul>
              {props.roles[project].map((role) => (
                <li>
                  <Icon name="fa6-solid:heart" class="heart" /> {role}
                </li>
              ))}
            </ul>
          )}
        </li>
      ))
    }
  </ul>
  <h3>Contacts</h3>
  <ul class="contacts">
    {
      props.contacts.map((contact) => (
        <li>
          {" "}
          <Icon name="fa6-solid:heart" class="heart" />{" "}
          <a href={contact}>{contact.substring(8)}</a>
        </li>
      ))
    }
  </ul>
</article>
<style>
  img {
    max-width: 150px;
    align-self: center;
  }

  ul,
  .contacts {
    padding-left: 40px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  li {
    list-style: none;
    padding: 0;
    display: flex;
    align-items: flex-start;
    gap: 10px;
  }

  .projects > li {
    flex-direction: column;
    gap: 10px;
    font-weight: 800;
  }

  .projects > li > ul {
    font-weight: normal;
    gap: 5px;
  }

  .projects {
    padding-left: 10px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .heart {
    margin-left: -16px;
    color: var(--fujo-pink);
  }

  h2 a {
    grid-column: span 2;
    font-family: "freude", sans-serif;
    font-weight: 400;
    font-style: normal;
    color: var(--fujo-light-blue);
    font-size: 1.7rem;
    text-shadow:
      -1px -1px 0 var(--terminal-dark),
      1px -1px 0 var(--terminal-dark),
      -1px 1px 0 var(--terminal-dark),
      1px 1px 0 var(--terminal-dark);
    margin-bottom: 8px;
    filter: drop-shadow(1px 1px 0px var(--terminal-dark));
    text-decoration: none;
  }

  h2 a:hover {
    color: var(--fujo-red);
  }

  article {
    display: flex;
    flex-direction: column;
    padding: 25px 30px;
    margin-bottom: 15px;
    border-radius: 10px;
    row-gap: 10px;
    box-shadow: 2px 2px 0px 0px var(--text-color-disabled);
    background-color: white;
    word-break: break-all;
  }

  a {
    color: var(--fujo-red);
    transition: 100ms;
  }

  a:hover {
    color: var(--fujo-pink);
  }

  img {
    border-radius: 16px;
  }
</style>
